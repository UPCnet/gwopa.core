<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
    xmlns:tal="http://xml.zope.org/namespaces/tal"
    xmlns:metal="http://xml.zope.org/namespaces/metal"
    xmlns:i18n="http://xml.zope.org/namespaces/i18n"
    lang="en"
    metal:use-macro="context/main_template/macros/master"
    i18n:domain="gwopa">
<body>

<metal:content-core fill-slot="main"
    tal:define="portal_state context/@@plone_portal_state;
                portal_url portal_state/portal_url;">
  <metal:block define-macro="content-core" tal:define="currentYear view/getYear">
    <div class="block-nav">
      <ul class="pagination pagination-lg" tal:define="items view/getItems">
        <tal:block tal:repeat="item items">
          <li tal:attributes="class item/classe; alt item/alt; title item/alt">
            <a href="#" tal:attributes="href item/url"><tal:omit-tag tal:content="item/title"></tal:omit-tag>&nbsp;<tal:omit-tag tal:content="item/year"></tal:omit-tag></a>
          </li>
        </tal:block>
      </ul>
    </div>
    <h1 class="documentFirstHeading">
      <tal:omit-tag i18n:translate=""> Monitoring </tal:omit-tag> -
      <span tal:content="view/projectTitle"></span></h1>
    <div class="documentDescription description projectDates">
      <span class="dateNumbers">
        <tal:omit-tag i18n:translate=""> Project year </tal:omit-tag>&nbsp;<tal:omit-tag tal:content="currentYear"> 2019 </tal:omit-tag>
      </span>
      <tal:omit-tag i18n:translate=""> goes from </tal:omit-tag>&nbsp;<span tal:content="view/getFaseStart" class="dateNumbers"> 2019-02-02 </span>&nbsp;<tal:omit-tag i18n:translate=""> to </tal:omit-tag>&nbsp;<span tal:content="view/getFaseEnd" class="dateNumbers"> 2019-03-03 </span>&nbsp;<span tal:content="view/getPhases" id="totalPhases" style="display: none"></span>
    </div>

    <ul class="nav nav-tabs" role="tablist">
      <li role="presentation" class="active"><a href="#project" aria-controls="project" role="tab" data-toggle="tab" i18n:translate=""> Project </a></li>
      <li role="presentation"><a href="#outcomes" aria-controls="outcomes" role="tab" data-toggle="tab" i18n:translate=""> Outcomes </a></li>
    </ul>

    <div class="tab-content">
      <div role="tabpanel" class="tab-pane active" id="project">
        <tal:block-activities tal:define="areas view/getAreas" tal:condition="areas">
          <div class="documentDescription titleCollapse">
            <span id="collapseAllProjectTab" i18n:translate="">Collapse all <i class="fa fa-chevron-up" aria-hidden="true"></i></span>
            <span id="expandAllProjectTab" i18n:translate="">Expand all <i class="fa fa-chevron-down" aria-hidden="true"></i></span>
          </div>
          <div class="tabla_contenido_items container-fluid">
            <tal:objects repeat="area areas">
              <div class="row-fluid" tal:define="files python:view.indicatorsInside(area);">
                <div class="tabla_cabecera">
                  <div class="tabla_hilera">
                    <div class="tabla_info">
                      <div class="information object" id="header">
                        <div class="contentt" id="total">
                          <div class="titleRowMonitoring">
                            <!-- <a tal:attributes="href area/url" tal:content="area/title"> Item Title </a> -->
                            <span tal:attributes="id string:${area/id}" class="expMoWA" tal:content="area/title"> Working Area Title </span>
                          </div>
                        </div>
                        <div class="contentt" id="bl" i18n:translate="">Starting date</div>
                        <div class="contentt" id="comple">Completion Date</div>
                        <div class="contentt" id="pyv">Target value</div>
                        <div class="contentt" id="nexupd">Next update</div>
                        <i tal:attributes="id string:wa-${area/id}" class="fas fa-chevron-up expandWA"></i>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="tabla_cuerpo" tal:repeat="item files">
                  <div class="tabla_hilera">
                    <div class="block_content">
                      <div class="col-md-12 text-item-planning">
                        <div class="information object">
                          <div class="contentt" id="total">
                            <div class="part0">
                              <tal:block tal:condition="item/updated">
                                <span class="dot">
                                  <i id="done" class="fas fa-circle"></i>
                                </span>
                              </tal:block>
                            </div>
                            <div class="part1">
                              <h5 tal:attributes="class string:${item/portal_type}-planning" tal:content="item/portal_type" i18n:translate=""> Activity/output label</h5>
                            </div>
                            <div class="part2">
                              <h5 class="titulocatplan expMoAct" tal:attributes="id string:${item/id}" tal:content="item/title"> Activity/Output Title </h5>
                            </div>
                          </div>
                          <div class="contentt" id="bl" tal:content="item/start">2019-03-29</div>
                          <div class="contentt" id="comple" tal:content="item/end">28-02-2020</div>
                          <div class="contentt" id="pyv">
                            <tal:block tal:condition="python:item['portal_type'] == 'Output'">
                              <span tal:content="item/target_value_real"> 200 </span> / <span tal:content="item/target_value_planned"> 200 </span>
                              <span tal:content="item/unit"> m3 </span>
                            </tal:block>
                            <tal:block tal:condition="python:item['portal_type'] == 'Activity'">  -----  </tal:block>
                          </div>
                          <div class="contentt" id="nexupd" tal:content="item/next_update"> 18-12-2022</div>
                          <i tal:attributes="id string:act-${item/id}" class="fas fa-chevron-up expandAct"></i>
                        </div>
                        <tal:comment replace="nothing"> <!-- Activity desplegable --> </tal:comment>
                        <div class="tabla_cuerpo" id="contenido">
                          <form id="updateActivity">
                            <div class="col-md-12 text-item-planning expandedBox" id="#" role="tabpanel" aria-expanded="true">
                              <div class="filacontenido">
                                <div class="col-sm-2">
                                  <h3 i18n:translate="">Progress Degree (%)</h3>
                                  <input type="text" tal:attributes="id string:${item/id}-progress; value item/progress;">
                                </div>
                                <div class="col-sm-5">
                                  <h3 i18n:translate="">Explanation Progress</h3>
                                  <textarea class="form-control" rows="1" tal:content="item/explanation" tal:attributes="id string:${item/id}-explanation;"></textarea>
                                </div>
                                <div class="col-sm-3">
                                  <h3 i18n:translate="">Main Obstacles</h3>
                                  <input type="hidden" tal:attributes="id string:${item/id}-activity-obs; value item/obstacles;" style="width: 100%" />
                                  <div tal:attributes="id string:${item/id}-addObstacleActivity" class="form-group col-sm-12">
                                    <i class="fas fa-plus-circle" aria-hidden="true"></i>&nbsp;
                                    <span class="legend">Add new Main Obstacles if not listed in the before field</span>
                                  </div>
                                  <div tal:attributes="id string:${item/id}-addObstaclesActivity" class="form-group col-sm-12">
                                    <h3 i18n:translate="">Main Obstacles title</h3>
                                    <input type="text" tal:attributes="id string:${item/id}-add-obs"  placeholder="Type title..."/>
                                  </div>
                                </div>
                                <div class="col-sm-3">
                                  <h3 i18n:translate="">Main Contributing factors</h3>
                                  <input type="hidden" tal:attributes="id string:${item/id}-activity-contrib; value item/contributing;" style="width: 100%"/>
                                  <div tal:attributes="id string:${item/id}-addContributingActivity" class="form-group col-sm-12">
                                    <i class="fas fa-plus-circle" aria-hidden="true"></i>&nbsp;
                                    <span class="legend">Add new Main Contributing if not listed in the before field</span>
                                  </div>
                                  <div tal:attributes="id string:${item/id}-addContributingsActivity" class="form-group col-sm-12">
                                    <h3 i18n:translate="">Main Contributing factors title</h3>
                                    <input type="text" tal:attributes="id string:${item/id}-add-contrib" placeholder="Type title..."/>
                                  </div>
                                </div>
                              </div>
                              <div class="filacontenido">
                                <div class="col-sm-6">
                                  <h3 i18n:translate="">Consideration for further planning</h3>
                                  <textarea class="form-control" rows="1" tal:content="item/consideration" tal:attributes="id string:${item/id}-consideration;"></textarea>
                                </div>
                                <div class="col-sm-6">
                                  <h3 i18n:translate="">Explain contributed and limiting factors</h3>
                                  <textarea class="form-control" rows="1" tal:content="item/limiting" tal:attributes="id string:${item/id}-limiting;"></textarea>
                                </div>
                              </div>
                              <div tal:content="item/year" id="year" style="display:none;"></div>
                              <div tal:content="item/path" tal:attributes="id string:${item/id}-path" style="display:none;"></div>
                              <button type="submit" tal:attributes="id string:${item/id}-updateActivityMonitoring; class string:${item/id} btn btn-default focus"> Update </button>
                            </div>
                          </form>
                        </div>
                        <tal:block tal:define="outputs python:view.indicatorsInside(item);">
                          <div tal:repeat="output outputs" class="block_sub_indicators">
                            <div class="information object">
                              <div class="contentt" id="total">
                                <div class="part0">
                                  <tal:block tal:condition="output/updated">
                                    <span class="dot">
                                      <i id="done" class="fas fa-circle"></i>
                                    </span>
                                  </tal:block>
                                </div>
                                <div class="part1">
                                  <h5 tal:attributes="class string:${output/portal_type}-planning second-level" tal:content="output/portal_type" i18n:translate="">Type Output</h5>
                                </div>
                                <div class="part2">
                                  <h5 class="titulocatplan expMoOut" tal:attributes="id output/id" tal:content="output/title">Item Title</h5>
                                </div>
                              </div>
                              <div class="contentt" id="bl" tal:content="output/start">2019-03-29</div>
                              <div class="contentt" id="value" tal:content="output/end">2019-03-30</div>
                              <div class="contentt target" id="pyv">
                                <tal:exclamation tal:condition="python:output['target_value_real'] != output['target_value_planned']">
                                  <i class="fas fa-exclamation" title="Target value differs from planned"></i>
                                </tal:exclamation>
                                <span tal:attributes="
                                    data-pk currentYear;
                                    data-name output/url;
                                    data-url string:${context/absolute_url}/changeTargetMonitoring"
                                    data-type="text"
                                    data-title="Change target value"
                                    class="editable" tal:content="output/target_value_real"> Target Value Real
                                </span> /
                                <span tal:content="output/target_value_planned"> Target Value Planned </span>
                                <span tal:content="output/unit"> Unit </span>
                              </div>
                              <div class="contentt" id="nexupd" tal:content="output/next_update"> 18-12-2022</div>
                              <i tal:attributes="id string:out-${output/id}" class="fas fa-chevron-up expandOut"></i>
                            </div>
                          <div class="tabla_cuerpo" id="contenido">
                            <div class="col-md-12 text-item-planning expandedBox" id="#" role="tabpanel" aria-expanded="true">
                              <form  id="updateOutput">
                                <div class="filacontenido">
                                  <div class="col-sm-1">
                                    <h3 i18n:translate=""> Value </h3>
                                      <input type="text" tal:attributes="id string:${output/id}-progress; value output/progress;">
                                  </div>
                                  <div class="col-sm-5">
                                    <h3 i18n:translate="">Explanation Progress</h3>
                                    <textarea class="form-control" rows="1" tal:content="output/explanation" tal:attributes="id string:${output/id}-explanation;"></textarea>
                                  </div>
                                  <div class="col-sm-3">
                                    <h3 i18n:translate="">Main Obstacles</h3>
                                    <input type="hidden" tal:attributes="id string:${output/id}-output-obs; value output/obstacles;" style="width: 100%"/>
                                    <div tal:attributes="id string:${output/id}-addObstacleOutput" class="form-group col-sm-12">
                                      <i class="fas fa-plus-circle" aria-hidden="true"></i>&nbsp;
                                      <span class="legend">Add new Main Obstacles if not listed in the before field</span>
                                    </div>
                                    <div tal:attributes="id string:${output/id}-addObstaclesOutput" class="form-group col-sm-12">
                                      <h3 i18n:translate="">Main Obstacles title</h3>
                                      <input type="text" tal:attributes="id string:${output/id}-add-obs" placeholder="Type title..."/>
                                    </div>
                                  </div>
                                  <div class="col-sm-3">
                                    <h3 i18n:translate="">Main Contributing factors</h3>
                                    <input type="hidden" tal:attributes="id string:${output/id}-output-contrib; value output/contributing;" style="width: 100%"/>
                                    <div tal:attributes="id string:${output/id}-addContributingOutput" class="form-group col-sm-12">
                                      <i class="fas fa-plus-circle" aria-hidden="true"></i>&nbsp;
                                      <span class="legend">Add new Main Contributing if not listed in the before field</span>
                                    </div>
                                    <div tal:attributes="id string:${output/id}-addContributingsOutput" class="form-group col-sm-12">
                                      <h3 i18n:translate="">Main Contributing factors title</h3>
                                      <input type="text" tal:attributes="id string:${output/id}-add-contrib" placeholder="Type title..."/>
                                    </div>
                                  </div>
                                </div>
                                <div class="filacontenido">
                                  <div class="col-sm-6">
                                    <h3 i18n:translate="">Consideration for further planning</h3>
                                    <textarea class="form-control" rows="1" tal:content="output/consideration" tal:attributes="id string:${output/id}-consideration;"></textarea>
                                  </div>
                                  <div class="col-sm-6">
                                    <h3 i18n:translate="">Explain contributed and limiting factors</h3>
                                    <textarea class="form-control" rows="1" tal:content="output/limiting" tal:attributes="id string:${output/id}-limiting;"></textarea>
                                  </div>
                                </div>
                                <div tal:content="output/year" id="year" style="display:none;"></div>
                                <div tal:content="output/path" tal:attributes="id string:${output/id}-path" style="display:none;"></div>
                                <button type="submit" tal:attributes="id string:${output/id}-updateOutputMonitoring; class string:${output/id} btn btn-default focus"> Update </button>
                              </form>
                            </div>
                          </div>
                          </div>
                        </tal:block>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </tal:objects>
          </div>
        </tal:block-activities>
      </div>
      <div role="tabpanel" class="tab-pane" id="outcomes">
        <div class="documentDescription titleCollapse">
          <span id="collapseAllOutcomeTab" i18n:translate="">Collapse all <i class="fa fa-chevron-up" aria-hidden="true"></i></span>
          <span id="expandAllOutcomeTab" i18n:translate="">Expand all <i class="fa fa-chevron-down" aria-hidden="true"></i></span>
        </div>
        <div class="tabla_contenido_items">
          <div class="row boxUtilityPerformance" tal:define="outcomes view/listOutcomesKPI">
            <div class="tabla_cabecera">
              <div class="information object" id="header">
                <div class="contentt" id="total">
                  <div class="titleRowMonitoring" i18n:translate="">
                    <span id="utility" class="expMoUP"> Utility Performance </span>
                  </div>
                </div>
                <div class="contentt" id="comple">Baseline date</div>
                <div class="contentt" id="pyv">Target value</div>
                <div class="contentt" id="nexupd">Next update</div>
                <i id="up" class="fas fa-chevron-up expandUP"></i>
              </div>
            </div>
            <div class="tabla_cuerpo" tal:repeat="outcome outcomes">
              <div class="col-md-12 text-item-planning">
                <div class="information object">
                  <div class="contentt" id="total">
                    <div class="part0">
                      <tal:block tal:condition="outcome/updated">
                        <span class="dot">
                          <i id="done" class="fas fa-circle"></i>
                        </span>
                      </tal:block>
                    </div>
                    <div class="part11">
                      <tal:block condition="python:outcome['portal_type'] == 'OutcomeKPI'">
                        <h5 tal:attributes="class string:${outcome/portal_type}-planning" i18n:translate="">Performance</h5>
                      </tal:block>
                      <tal:block condition="python:outcome['portal_type'] == 'OutcomeZONE'">
                        <h5 tal:attributes="class string:${outcome/portal_type}-planning" tal:content="outcome/portal_type" i18n:translate="">Outcome - KPI Type</h5>
                      </tal:block>
                    </div>
                    <div class="part2">
                      <h5 class="titulocatplan expMoUPItem" tal:attributes="id string:${outcome/id}" tal:content="outcome/title"> KPI </h5>
                    </div>
                  </div>
                  <div class="contentt" id="comple" tal:content="outcome/base_date">2019-03-30</div>
                  <div class="contentt target" id="pyv">
                    <tal:exclamation tal:condition="python:outcome['target_value_real'] != outcome['target_value_planned']">
                      <i class="fas fa-exclamation"></i>
                    </tal:exclamation>
                    <span tal:attributes="
                        data-pk currentYear;
                        data-name outcome/url;
                        data-url string:${context/absolute_url}/changeTargetMonitoring"
                        data-type="text"
                        data-title="Change target value"
                        class="editable" tal:content="outcome/target_value_real"> Target Value Real
                    </span> /
                    <span tal:content="outcome/target_value_planned"> Target Value Planned </span>
                    <span tal:content="outcome/unit"> Unit</span>
                  </div>
                  <div class="contentt" id="nexupd" tal:content="outcome/next_update"> 18-12-2022</div>
                  <i tal:attributes="id string:wa-${outcome/id}" class="fas fa-chevron-up expandOutcome"></i>
                </div>
                <tal:comment replace="nothing">  <!-- KPI desplegable --> </tal:comment>
                <div class="tabla_cuerpo" id="contenido">
                  <form id="updateKPI">
                    <div class="col-md-12 text-item-planning expandedBox" id="#" role="tabpanel" aria-expanded="true">
                      <div class="filacontenido">
                        <div class="col-sm-1">
                          <h3 i18n:translate="">Current</h3>
                          <input type="text" tal:attributes="id string:${outcome/id}-progress; value outcome/progress;">
                        </div>
                        <div class="col-sm-5">
                          <h3 i18n:translate="">Explanation Progress</h3>
                          <textarea class="form-control" rows="1" tal:content="outcome/explanation" tal:attributes="id string:${outcome/id}-explanation;"></textarea>
                        </div>
                        <div class="col-sm-3">
                          <h3 i18n:translate="">Main Obstacles</h3>
                          <input type="hidden" tal:attributes="id string:${outcome/id}-kpi-obs; value outcome/obstacles;" style="width: 100%"/>
                          <div tal:attributes="id string:${outcome/id}-addObstacleKPI" class="form-group col-sm-12">
                            <i class="fas fa-plus-circle" aria-hidden="true"></i>&nbsp;
                            <span class="legend">Add new Main Obstacles if not listed in the before field</span>
                          </div>
                          <div tal:attributes="id string:${outcome/id}-addObstaclesKPI" class="form-group col-sm-12">
                            <h3 i18n:translate="">Main Obstacles title</h3>
                            <input type="text" tal:attributes="id string:${outcome/id}-add-obs" placeholder="Type title..."/>
                          </div>
                        </div>
                        <div class="col-sm-3">
                          <h3 i18n:translate="">Main Contributing factors</h3>
                          <input type="hidden" tal:attributes="id string:${outcome/id}-kpi-contrib; value outcome/contributing;" style="width: 100%"/>
                          <div tal:attributes="id string:${outcome/id}-addContributingKPI" class="form-group col-sm-12">
                            <i class="fas fa-plus-circle" aria-hidden="true"></i>&nbsp;
                            <span class="legend">Add new Main Contributing if not listed in the before field</span>
                          </div>
                          <div tal:attributes="id string:${outcome/id}-addContributingsKPI" class="form-group col-sm-12">
                            <h3 i18n:translate="">Main Contributing factors title</h3>
                            <input type="text" tal:attributes="id string:${outcome/id}-add-contrib" placeholder="Type title..."/>
                          </div>
                        </div>
                      </div>
                      <div class="filacontenido">
                        <div class="col-sm-6">
                          <h3 i18n:translate="">Consideration for further planning</h3>
                          <textarea class="form-control" rows="1" tal:content="outcome/consideration" tal:attributes="id string:${outcome/id}-consideration;"></textarea>
                        </div>
                        <div class="col-sm-6">
                          <h3 i18n:translate="">Explain contributed and limiting factors</h3>
                          <textarea class="form-control" rows="1" tal:content="outcome/limiting" tal:attributes="id string:${outcome/id}-limiting;"></textarea>
                        </div>
                      </div>
                      <div tal:content="outcome/year" id="year" style="display:none;"></div>
                      <div tal:content="outcome/path" tal:attributes="id string:${outcome/id}-path" style="display:none;"></div>
                      <button type="submit" tal:attributes="id string:${outcome/id}-updateKPIMonitoring; class string:${outcome/id} btn btn-default focus"> Update </button>
                    </div>
                  </form>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script type="text/javascript" src="++theme++gwopa.theme/assets/javascripts/collapse-monitoring.js"></script>
    <link rel="stylesheet" href="++theme++gwopa.theme/assets/javascripts/jquery-editable.css" rel="stylesheet"/>
    <script type="text/javascript" src="++theme++gwopa.theme/assets/javascripts/jquery.poshytip.js"></script>
    <script type="text/javascript" src="++theme++gwopa.theme/assets/javascripts/jquery-editable-poshytip.js"></script>
    <script type="text/javascript" src="++plone++static/components/bootstrap/js/modal.js"></script>
    <script type="text/javascript" src="++plone++static/components/bootstrap/js/tab.js"></script>

  </metal:block>

</metal:content-core>

</body>
</html>
