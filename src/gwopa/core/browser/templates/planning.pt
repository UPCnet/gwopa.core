<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
    xmlns:tal="http://xml.zope.org/namespaces/tal"
    xmlns:metal="http://xml.zope.org/namespaces/metal"
    xmlns:i18n="http://xml.zope.org/namespaces/i18n"
    lang="en"
    metal:use-macro="context/main_template/macros/master"
    i18n:domain="gwopa">
<body>

<metal:content-core fill-slot="main"
    tal:define="portal_state context/@@plone_portal_state;
                portal_url portal_state/portal_url;">

  <metal:javascript fill-slot="javascript_head_slot">
    <script>
      require = undefined;
      define = undefined;
    </script>
    <script src="//unpkg.com/vue@2.5.21/dist/vue.js"></script>
    <!-- <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script> -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  </metal:javascript>

  <metal:block define-macro="content-core" tal:define="currentYear view/getYear">

    <h1 class="documentFirstHeading">Planning - Project Year <tal:omit-tag tal:content="currentYear">2019</tal:omit-tag></h1>
    <div class="documentDescription description projectDates">
      Start date: <tal:omit-tag tal:content="view/getFaseStart">2019-02-02</tal:omit-tag> - End date: <tal:omit-tag tal:content="view/getFaseEnd">2019-03-03</tal:omit-tag>
    </div>
    <div class="block-nav">
      <ul class="pagination pagination-lg" tal:define="items view/getItems">
        <tal:block tal:repeat="item items">
          <li tal:attributes="class item/classe">
            <a href="#" tal:attributes="href item/url"><tal:omit-tag tal:content="item/title"></tal:omit-tag>
            </a>
          </li>
        </tal:block>
      </ul>
    </div>

    <div id="exTab1" class="container">
      <ul class="nav nav-pills">
        <li class="active">
          <a href="#project" data-toggle="tab">Project</a>
        </li>
        <li><a href="#outcomes" data-toggle="tab">Outcomes</a>
        </li>
      </ul>
      <div class="tab-content clearfix">
        <div class="tab-pane active" id="project">
          <tal:block-activities tal:define="areas view/getAreas" tal:condition="areas">
            <!-- Delete Modal HTML -->
            <div id="deleteModal" class="modal fade">
              <div class="modal-dialog modal-confirm">
                <div class="modal-content">
                  <div class="modal-header">
                    <div class="icon-box">
                      <i class="fas fa-times"></i>
                    </div>
                    <h4 class="modal-title">Are you sure?</h4>
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                  </div>
                  <div class="modal-body">
                    <p>Do you really want to delete these record? This process cannot be undone.</p>
                  </div>
                  <p class="debug-url"></p>
                  <div class="modal-footer">
                    <button type="button" class="btn btn-info" data-dismiss="modal">Cancel</button>
                    <button id="delete" type="button" class="btn btn-danger" onclick="deleteElement(data)">Delete</button>
                  </div>
                </div>
              </div>
            </div>
            <tal:objects repeat="item areas">
              <div class="tabla_contenido_items" tal:define="files python:view.indicatorsInside(item);" data-toggle="collapse" aria-expanded="false"
                  tal:attributes="href string:#collapse-${item/id}; aria-controls string:collapse-${item/id};">
                  <div class="tabla_cabecera">
                    <div class="tabla_hilera">
                      <div class="tabla_info">
                        <div class="information object" id="header">
                          <div class="contentt" id="total">
                            <div class="btn-group" role="group" aria-label="Add element">
                              <div data-toggle="dropdown"><i class="fas fa-plus-circle"></i></div>
                              <ul class="dropdown-menu" role="menu" aria-labelledby="types">
                                <li>
                                  <a class="pat-plone-modal" tabindex="-1" href="" tal:attributes="href string:${item/url}/++add++Activity">
                                    <span><i class="fas fa-plus-circle"></i><tal:omit-tag i18n:translate=""> Add Activity </tal:omit-tag></span>
                                  </a>
                                </li>
                                <li>
                                  <a class="pat-plone-modal" tabindex="-1" href="" tal:attributes="href string:${item/url}/++add++Output">
                                    <span><i class="fas fa-plus-circle"></i> Add Output </span>
                                  </a>
                                </li>
                              </ul>
                            </div>
                            <div class="titleRowPlanning">
                              <a tal:attributes="href item/url" tal:content="item/title"> Item Title </a>
                            </div>
                          </div>
                          <div class="contentt" id="bl">Starting Date</div>
                          <div class="contentt" id="value">Completion Date</div>
                          <div class="contentt" id="target">Target Value</div>
                          <div class="contentt" id="target">Measuring Unit</div>
                          <div class="contentt" id="mu">Responsible</div>
                          <div class="contentt" id="actions">Action</div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="collapse in" tal:attributes="id string:collapse-${item/id}">
                  <div class="tabla_cuerpo" tal:repeat="item files">
                    <div class="tabla_hilera">
                      <div class="block_content">
                        <div class="col-md-12 text-item-planning">
                          <div class="information object">
                            <div class="contentt" id="total">
                              <tal:block tal:condition="python:item['portal_type'] == 'Activity'">
                                <a class="pat-plone-modal" tabindex="-1" href="" tal:attributes="href string:${item/url}/++add++Output"><i class="fa fa-plus-circle"></i></a>
                              </tal:block>
                              <div tal:attributes="class string:${item/portal_type}-planning" tal:content="item/portal_type">Activity/output label</div>
                              <h4 class="titulocatplan" id="output" tal:content="item/title"> Activity/Output Title </h4>
<!--                               <tal:block tal:condition="python:item['portal_type'] == 'Output'">
                                <a class="pat-plone-modal" data-pat-plone-modal="{&quot;actionOptions&quot;: {&quot;displayInModal&quot;: false}}" tal:attributes="href string:${item/url}/++add++TargetValue" href="#"><button class="plone-btn plone-btn-sm"> + </button></a>
                              </tal:block> -->
                            </div>
                            <div class="contentt" id="bl" tal:content="item/start">2019-03-29</div>
                            <div class="contentt" id="value" tal:content="item/end">2019-03-30</div>
                            <div class="contentt" id="target" tal:content="item/value"> 223 </div>
                            <div class="contentt" id="unit" tal:content="item/unit"> Meters </div>
                            <div class="contentt" id="mu" tal:content="item/responsible"> Members </div>
                            <div class="contentt" id="actions">
                              <a class="pat-plone-modal"
                                tal:attributes="
                                  href string:${item/url}/edit;
                                  title string:Edit ${item/title};
                                  alt string:Edit ${item/title}"><i class="far fa-edit"></i></a>
                              <a href="#deleteModal" data-toggle="modal"
                                tal:attributes="
                                  data-item item/url;
                                  data-type item/portal_type;
                                  title string:Delete ${item/title};
                                  alt string:Delete ${item/title}"><i class="far fa-trash-alt"></i></a>
                            </div>
                          </div>
                        </div>
                      </div>
                      <tal:block tal:condition="python:item['portal_type'] == 'Activity'" tal:define="outputs python:view.indicatorsInside(item);">
                          <div tal:repeat="output outputs" class="block_sub_indicators">
                            <div class="information object">
                              <div class="contentt" id="total">
                              <div tal:attributes="class string:${output/portal_type}-planning indent-item" tal:content="output/portal_type">Type Output</div>
                              <h4 class="titulocatplan" tal:content="output/title"> Item Title </h4>
                            </div>
<!--                             <a class="pat-plone-modal" data-pat-plone-modal="{&quot;actionOptions&quot;: {&quot;displayInModal&quot;: false}}" tal:attributes="href string:${output/url}/++add++TargetValue" href="#"><button class="plone-btn plone-btn-sm"> + </button></a> -->
                              <div class="contentt" id="bl" tal:content="output/start">2019-03-29</div>
                              <div class="contentt" id="value" tal:content="output/end">2019-03-30</div>
                              <div class="contentt" id="target" tal:content="item/value"> 223 </div>
                              <div class="contentt" id="unit" tal:content="item/unit"> Meters </div>
                              <div class="contentt" id="mu" tal:content="output/responsible"> Responsible </div>
                              <div class="contentt" id="actions">
                                <a class="pat-plone-modal"
                                  tal:attributes="
                                    href string:${output/url}/edit;
                                    title string:Edit ${output/title};
                                    alt string:Edit ${output/title}"><i class="far fa-edit"></i></a>
                                <a href="#deleteModal" data-toggle="modal"
                                  tal:attributes="
                                    data-item item/url;
                                    data-type item/portal_type;
                                    title string:Delete ${item/title};
                                    alt string:Delete ${item/title}"><i class="far fa-trash-alt"></i></a>
                              </div>
                            </div>
                          </div>
                      </tal:block>
                    </div>
                  </div>
                  </div>
              </div>
            </tal:objects>
          </tal:block-activities>
        </div>
        <div class="tab-pane" id="outcomes">
          <div tal:define="outcomes view/listOutcomesKPI" class="clearfix">
            <div class="btn-group" role="group" aria-label="Add KPI">
              <div data-toggle="dropdown"><i class="fas fa-plus-circle"></i></div>
              <ul class="dropdown-menu" role="menu" aria-labelledby="kpis">
                <li><a class="pat-plone-modal" tabindex="-1" href="" tal:attributes="href string:${context/absolute_url}/++add++OutcomeKPI"><span><i class="fas fa-plus-circle"></i> New Overall KPI </span></a></li>
                <li><a class="pat-plone-modal" tabindex="-1" href="" tal:attributes="href string:${context/absolute_url}/++add++OutcomeZONE"><span><i class="fas fa-plus-circle"></i> New KPI Zone </span></a></li>
              </ul>
            </div>
            <div class="titleRowPlanning">
              <tal:omit-tag i18n:translate=""> Utility Performance </tal:omit-tag>
            </div>
            <hr/>
            <tal:objects repeat="outcome outcomes">
              <ul class="item">
                <li>
                  <span tal:attributes="class string:label ${outcome/portal_type}"
                              tal:content="outcome/portal_type"> ACTIVITY </span>
                  <a tal:attributes="href outcome/url; title outcome/description" data-toggle="tooltip" class="pat-tooltip">
                    <tal:block tal:content="outcome/title"> Outcome Title </tal:block></a>
                </li>
              </ul>
            </tal:objects>
          </div>
          <tal:block-ouctomes tal:define="outcomes view/listOutcomesCC" tal:condition="outcomes">
            <h4 i18n:translate=""> Utility Capacity </h4>
            <hr/>
            <ul class="item">
              <li tal:repeat="outcome outcomes">
                <a class="pat-plone-modal" tal:attributes="href string:${outcome/url}">
                  Improve capacity in <tal:block tal:content="outcome/area"> Outcome Title </tal:block></a>
              </li>
            </ul>
          </tal:block-ouctomes>
        </div>
      </div>
    </div>

  </metal:block>

  <script>
  $('#delete').click(function() {
      $('#deleteModal').modal('hide');
  });
  </script>

</metal:content-core>

</body>
</html>
