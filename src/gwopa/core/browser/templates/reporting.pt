<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
    xmlns:tal="http://xml.zope.org/namespaces/tal"
    xmlns:metal="http://xml.zope.org/namespaces/metal"
    xmlns:i18n="http://xml.zope.org/namespaces/i18n"
    lang="en"
    metal:use-macro="context/main_template/macros/master"
    i18n:domain="gwopa">
<body>

<metal:content-core fill-slot="main"
    tal:define="portal_state context/@@plone_portal_state;
                portal_url portal_state/portal_url;
                gwopa_utils context/@@gwopa.utils;">

  <tal:omit-tag-ini tal:define="canViewPlanningMonitoring gwopa_utils/canViewPlanningMonitoring">
  <metal:block tal:condition="not: canViewPlanningMonitoring">
   <h1 class="documentFirstHeading" i18n:translate="">Insufficient permissions</h1>
  </metal:block>

  <metal:block tal:condition="canViewPlanningMonitoring" define-macro="content-core"
               tal:define="canEditPlanningMonitoring gwopa_utils/canEditPlanningMonitoring">
    <h1 class="documentFirstHeading">
      <tal:omit-tag i18n:translate=""> Reporting </tal:omit-tag> -
      <span tal:content="view/projectTitle"></span>
    </h1>

    <div id="reportingProject" class="row tabla_contenido_items">

      <div id="reportActions">
        <a tal:attributes="href string:${view/projectURL}/reportPreview">
          <button id="generateReport" class="context focus right" i18n:translate="">Generate</button>
        </a>
        <a class="pat-plone-modal" tal:attributes="href string:${view/projectURL}/reports/++add++File"
           data-pat-plone-modal="{&quot;actionOptions&quot;: {&quot;displayInModal&quot;: false}}">
          <button id="addFileReport" class="context focus right" i18n:translate="">Add File</button>
        </a>
      </div>

      <table class="table table-condensed table-bordered table-responsive sortable table-striped">
        <thead>
          <tr>
            <th scope="col" i18n:translate="">Report</th>
            <th scope="col" i18n:translate="">Date</th>
            <th scope="col" i18n:translate="">Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr tal:repeat="report view/getReports">
            <td>
              <a tal:attributes="href report/getURL" tal:content="report/Title"></a>
            </td>
            <td tal:content="python: report.created.strftime('%m/%d/%Y %H:%M')"></td>
            <td>
              <a tal:attributes="href report/getURL">
                <i class="fas fa-download" aria-hidden="true"></i>
              </a>
              <a title="" id="plone-contentmenu-actions-edit"
                 class="actionicon-object_buttons-edit pat-plone-modal"
                 tal:attributes="href string:${report/getURL}/edit">
                <i class="far fa-edit" aria-hidden="true"></i>
              </a>
              <a title="" id="plone-contentmenu-actions-delete"
                 class="actionicon-object_buttons-delete pat-plone-modal"
                 tal:attributes="href string:${report/getURL}/delete_confirmation">
                <i class="far fa-trash-alt" aria-hidden="true"></i>
              </a>
            </td>
          </tr>
        </tbody>
      </table>

    </div>


    <link rel="stylesheet" href="++theme++gwopa.theme/assets/javascripts/jquery-editable.css" rel="stylesheet"/>
    <script type="text/javascript" src="++theme++gwopa.theme/assets/javascripts/jquery.poshytip.js"></script>
    <script type="text/javascript" src="++theme++gwopa.theme/assets/javascripts/jquery-editable-poshytip.js"></script>
    <script type="text/javascript" src="++plone++static/components/bootstrap/js/modal.js"></script>
    <script type="text/javascript" src="++plone++static/components/bootstrap/js/tab.js"></script>
    <!-- <script type="text/javascript" src="++theme++gwopa.theme/assets/javascripts/reporting.js"></script> -->

  </metal:block>
  </tal:omit-tag-ini>

</metal:content-core>

</body>
</html>
